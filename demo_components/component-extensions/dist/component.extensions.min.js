!function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.utils=t(),e.returnExports=e.elliptical.extensions.utils)}(this,function(){return{_utils:$.utils,_DOMParser:function(e){return(new DOMParser).parseFromString(e,"text/html")},_preloadImages:function(e,t){var i=[],n={},o={},r=e.find("img").not("[data-src]"),a=r.length,s=0;return 0===a?(t&&(n.message="No images found in element",t(n,null)),!1):($.each(r,function(e,n){var r=new Image;$(r).bind("load",function(e){s++,i.push(r),s===a&&t&&(o.images=i,o.length=s,t(null,o))}),r.src=n.src}),!0)},_scrollTop:function(e,t){"number"!=typeof e?e=0:"undefined"==typeof t&&(t="scrollTop"),setTimeout(function(){window.scrollTo(0,e),$(document).trigger(t,{x:0,y:e})},20)},_setModal:function(e,t,i){var n=arguments.length;0===n?(e=$("body"),t={},i=null):1===n?"function"==typeof e?(i=e,e=$("body"),t={}):e.context?(t={},i=null):(t=e,e=$("body")):2===n&&("function"==typeof t?(i=t,void 0===e.context?(t=e,e=$("body")):t={}):i=null);var o=$('<div class="ui-modal"></div>');t.cssClass&&o.addClass(t.cssClass),t.zIndex&&o.css({"z-index":t.zIndex}),this._data?this._data.set("modal",o):this._modal=o;var r=t.opacity?t.opacity:.3;o.css({opacity:0}),e.append(o),this._transition(o,{opacity:r,duration:250},function(){i&&i()})},_removeModal:function(e){var t=this,i=null;i=this._data?this._data.get("modal"):this._modal,i&&void 0!==i&&this._transition(i,{opacity:0,duration:250},function(){i.remove(),t._data?t._data.set("modal",null):t._modal=null,e&&e()})},_resetSemanticState:function(){this.element.removeClass("error").removeClass("warning").removeClass("success").removeClass("info")},_setChildrenAttributes:function(){var e=this.element;e[0].hasAttribute&&e[0].hasAttribute("disabled")&&e.query("input,textarea,select",function(e){e[0]&&e.attr("disabled",!0)}),e[0].hasAttribute&&e[0].hasAttribute("readonly")&&e.query("input,textarea,select",function(e){e[0]&&e.attr("readonly",!0)})},_enableChildrenAttributes:function(){var e=this.element;e.query("input,textarea,select",function(e){e[0]&&e.attr("disabled",!1)}),e.query("input,textarea,select",function(e){e[0]&&e.attr("readonly",!1)})},_find:function(e){return this.element.find(e)},_jsonParseMessage:function(e){try{var t=JSON.parse(e);return t.message?t.message:e}catch(i){return e}}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.device=t(),e.returnExports=elliptical.extensions.device)}(this,function(){return{_device:$.device,_mq:$.device.mq,_press:function(){return"ontouchend"in document?"touchstart":"click"},_mode:function(){return this._device.viewport.width>768?"desktop":"touch"}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.drawer=t(),e.returnExports=elliptical.extensions.drawer)}(this,function(){return{_createDrawer:function(e,t){if(!this._data.get("locked")){this._data.set("locked",!0);var i=$("ui-container");this._data.set("container",i);var n=i.parent();this._data.set("transformContainer",n);var o=$("<touch-ui-drawer></touch-ui-drawer>");t&&o.addClass(t);var r=this._device.viewport.height;o.css({"min-height":r+"px"}),this._device.touch||o.css({position:"relative"});var a=$("<header></header>"),s=this.element.find("touch-header");s[0]&&a.append(s),o.append(a);var l=$("<section></section>");o.append(l),i.before(o),this._data.set("drawer",o),this._data.set("drawerHeader",a),this._data.set("drawerSection",l)}},_openDrawer:function(e,t){var i=this;this._showDrawer();var n=this._device.viewport.height;this.options?this.options.height=n:this.height=n;var o=this._data.get("container"),r=this._data.get("transformContainer");this._setHardwareAcceleration(r),o.addClass("ui-fixed-toggle-container").css({height:n+"px"}).addClass("ui-drawer-box-shadow");var a=$("<ui-overlay></ui-overlay>");a.addClass("show"),o.append(a),this._data.set("overlay",a);var s=this.options?this.options.overlayBackground:this.overlayBackground,l=this.options?this.options.overlayOpacity:this.overlayOpacity,d=this.options?this.options.overlayOpenDuration:this.overlayOpenDuration,u=this.options?this.options.transformDuration:this.transformDuration,c=this.options?this.options.transformDelay:this.transformDelay,h=this.options?this.options.translateX:this.translateX;a.transition({background:s,opacity:l,duration:d});var p={};p.duration=u,p.delay=c,p.easing="ease-in-out";var f={};f.x=h,f.y=0,f.z=0,p.coordinates=f,p.transitionEnd=!0;var m=this._data.click,v=this._closeDrawer.bind(this);this.element.trigger("drawer.open",{open:!0,closeEvent:v}),this._3dTransition(o,p,function(){i._resetHardwareAcceleration(r),i._resetTransition($(this)),e&&e()}),a.on(m,function(){t&&t()})},_closeDrawer:function(e){var t=this.options?this.options.height:this.height,i=this._data.get("container"),n=window.scrollY;if(n>0){t+=n,i.css({height:t+"px"}),this.element.css({top:n+"px"});var o=this._data.get("drawerHeader");o.css({top:n+"px"})}var r=this._data.get("transformContainer"),a=this.options?this.options.overlayBackground:this.overlayBackground,s=this.options?this.options.overlayCloseDuration:this.overlayCloseDuration,l=this.options?this.options.transformDuration:this.transformDuration,d=this.options?this.options.transformDelay:this.transformDelay,u=this._data.get("overlay"),c=this;this._setHardwareAcceleration(r);var h={};h.duration=l,h.delay=d,h.easing="ease-in-out";var p={};p.x=0,p.y=0,p.z=0,h.coordinates=p,h.transitionEnd=!0,this.element.trigger("drawer.close",{open:!1}),this._3dTransition(i,h,function(){c._resetHardwareAcceleration(r),c._resetContainer(i),c._hideDrawer(),e&&e()});var f=this._data.click;u.off(f),u.transition({background:a,opacity:0,duration:s},function(){u.remove()})},_showDrawer:function(){var e=this._device.viewport.height,t=this._data.get("drawer");t.css({"min-height":e+"px",display:"block"})},_hideDrawer:function(){var e=this._data.get("drawerHeader");e.css({top:""});var t=this._data.get("drawer");t.hide()},_removeDrawer:function(){var e=this._data.get("drawer");e&&(e.remove(),this._data.set("drawer",null)),this._data.set("locked",!1);var t=this._data.get("container");this._resetContainer(t);var i=this._data.get("overlay");i&&i.remove();var n=this._data.get("transformContainer");this._resetHardwareAcceleration(n)},_onDestroy:function(){},showDrawer:function(){this._showDrawer()},hideDrawer:function(){this._hideDrawer()}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.navigation=t(),e.returnExports=e.elliptical.extensions.navigation)}(this,function(){return{_createTouchNavigation:function(e,t){this._data.set("input",null),this._data.set("touchInput",null),this._createDrawer(e,t),this._createTouchMenu(e)},_removeTouchNavigation:function(e){var t=this._data.get("touchInput");t&&this._unbindSearch(t),this._removeDrawer(),this.element.css({position:""}),this._data.set("navLocked",!1)},_createTouchMenu:function(e){if(!this._data.get("navLocked")){this._data.set("navLocked",!0);var t=(this._data.get("drawer"),this._data.get("drawerSection"));if(t){var i=this._data.get("drawerHeader"),n=$("<touch-ui-menu></touch-ui-menu>"),o=this.options?this.options.includeHome:this.includeHome,r=this.options?this.options.homeUrl:this.homeUrl,a=this.options?this.options.homeIcon:this.homeIcon,s=this.options?this.options.touchMenu:this.touchMenu,l=this.options?this.options.model:this.model;if(o&&n.append(this._methods.createHomeListItem(r,a)),void 0!==s&&s===!1)return t.append(n),void this._data.set("drawerMenu",n);var d=this._getMenu(e),u=d.clone(),c=this._extractMenuItems(u);c.find("ui-button-dropdown").contents().unwrap(),c=this._methods.replaceWithMenuItemTags(c),this._methods.touchifyUIDropdowns(c),this._methods.iconifyTouchMenuItems(c),n.append(c),n=this._methods.addParentNodesToChildDropDowns(n,"ui-dropdown"),this._appendSearch(n,i);var h=this._methods.createMenuItemsFromArray(l);h&&n.append(h);var p=this.element.find("touch-section[header]");if(p[0]){var f=p.clone();t.append(f)}t.append(n);var m=this.element.find("touch-section[footer]");if(m[0]){var v=m.clone();t.append(v)}this._data.set("drawerMenu",n)}}},_getMenu:function(e){return e.find("ui-menu").not('[touch-menu="false"]').add(e.find('[role="menu"]'))},_extractMenuItems:function(e){var t='[touch-menu-item="false"]',i=e.children().not(t).add(e.find('[data-role="menu-item-dropdown"]'));return this._methods.filterMenuItems(i)},_appendSearch:function(e,t){var i=this;setTimeout(function(){var e=i.element.find("[role=search]");if(e[0]){var n=e.clone();t.append(n)}},1e3)},_appendMenuModel:function(){var e=this.options?this.options.model:this.model;if(this._mq.touch){var t=this._data.get("drawerMenu"),i=this._methods.createMenuItemsFromArray(e);i&&t.append(i)}},_addMenuModel:function(e){var t=$("touch-ui-menu"),i=this._methods.createMenuItemsFromArray(e);t.append(i)},_initSearchHandler:function(){var e="ui-search",t=this.element.find(e);if(t[0]){var i=t.find("input");return this._data.set("input",i),this._onSearch(i,"desktop"),t}return null},_initTouchSearchHandler:function(e,t){var i=e.clone(),n=i.find("input");n[0]&&(this._data.set("touchInput",n),t.append(i),this._onSearch(n,"touch"))},_onSearch:function(e,t){if("desktop"===t){if(this._data.get("searchRegistered"))return!1;this._data.set("searchRegistered",!0),this._onDesktopSearch(e)}else{if(this._data.get("touchSearchRegistered"))return!1;this._data.set("touchSearchRegistered",!0)}},_onDesktopSearch:function(e){function t(e){var t=e.val(),n={value:t};i("search",n)}var i=this._onEventTrigger.bind(this);e.on("focus",function(){e.on("click",function(i){$(this).hasClass("focused")?t(e):e.addClass("focused")}),e.keypress(function(i){return 13===i.which?(t(e),!0):void 0})}),e.on("blur",function(){e.removeClass("focused"),e.off("click")})},_onTouchSearch:function(e){function t(e){var t=e.val(),n={value:t};i("search",n)}var i=this._onEventTrigger.bind(this);e.on("focus",function(){e.on("tap",function(i){$(this).hasClass("focused")?t(e):e.addClass("focused")})}),e.on("blur",function(){e.removeClass("focused"),e.off("tap")})},__dropdownSelector:function(){return"touch-ui-dropdown"},__menuItemSelector:function(){return"menu-item-dropdown"},_touchToggleDropdown:function(e){var t=this.__dropdownSelector(),i=e.find(t);i.hasClass("show")?(e.removeClass("close"),i.removeClass("show")):(e.addClass("close"),i.addClass("show"))},_touchMenuItem:function(e,t){var i=this,n=this.options?this.options.transformDuration:this.transformDuration;n+=100;var o=e.attr("data-id"),r=e.attr("href"),a=e.attr("data-action"),s=e.attr("data-route");if(s&&"false"===s&&(t=!0),this._hide(),"undefined"!=typeof r&&"#"!=r&&"undefined"==typeof a&&t)setTimeout(function(){"undefined"!=typeof r&&i._location(r)},n);else{var l={id:o,action:a,mode:"touch",href:r};this._onEventTrigger("selected",l)}},_touchMenuLink:function(e,t){var i=e.attr("href");if("undefined"==typeof i||"#"===i){var n=e.parent("menu-item-dropdown");n[0]&&this._touchToggleDropdown(n)}else this._touchMenuItem(e,t)},_resetMenu:function(){var e=this._data.get("drawerMenu");e.find(".show").removeClass("show"),e.find(".close").removeClass("close")},_methods:{listItem:function(){return"menu-item"},dropdownListItem:function(){return"menu-item-dropdown"},iconAttribute:function(){return"touch-icon"},dropdownElement:function(){return"<ui-dropdown></ui-dropdown>"},createSpanItem:function(e){return $("<span>"+e+"</span>")},createCloneListItem:function(e,t){return $("<"+this.listItem()+'<a href="'+e+'">'+t+"</a></"+this.listItem()+">")},addParentNodesToChildDropDowns:function(e,t){var i=e.find(this.dropdownListItem()),n=this;return i.each(function(e,i){var o=$(i).children("a"),r=o.attr("href");if("undefined"!=typeof r&&"#"!=r){var a=o.html(),s=n.createCloneListItem(r,a),l=$(i).find("."+t);l.prepend(s);var d=n.createSpanItem(a);o.replaceWith(d)}}),e},createMenuItemsFromArray:function(e){if(0===e.length)return null;for(var t,i=[],n=0;n<e.length;n++)if(e[n].dropdown&&e[n].dropdown.length>0){t="undefined"!=typeof e[n].icon?$('<menu-item-dropdown><span class="touch-icon '+e[n].icon+'"></span><a>'+e[n].label+"</a></menu-item-dropdown>"):$("<menu-item-dropdown><a>"+e[n].label+"</a></menu-item-dropdown>");for(var o=$("<touch-ui-dropdown></touch-ui-dropdown>"),r=0;r<e[n].dropdown.length;r++){var a=$('<menu-item><a href="'+e[n].dropdown[r].url+'">'+e[n].dropdown[r].label+"</a></menu-item>");o.append(a)}t.append(o),i.push(t)}else t="undefined"!=typeof e[n].icon?$('<menu-item><span class="touch '+e[n].icon+'"><a href="'+e[n].url+'">'+e[n].label+"</a></span></menu-item>"):$('<menu-item><a href="'+e[n].url+'">'+e[n].label+"</a></menu-item>"),i.push(t);return i},createHomeListItem:function(e,t){var i,n=this.listItem(),o="home";return i=t?$("<"+n+" "+o+'><span class="touch-icon '+t+'"></span><a href="'+e+'" data-route="false">Home</a></'+n+">"):$("<"+n+" "+o+'><a href="'+e+'" data-route="false">Home</a></'+n+">")},filterMenuItems:function(e){var t=e.find('[data-touch="false"]');return $.each(t,function(e,t){$(t).remove()}),e},touchifyUIDropdowns:function(e){var t=this;$.each(e,function(e,i){var n=$(i).find("ui-dropdown"),o=$(i).find("ui-mega-dropdown");n&&n.length>0?(n.replaceWith("<touch-ui-dropdown>"+n.html()+"</touch-ui-dropdown>"),o&&o.length>0&&(t.createTouchMenuItemsFromMegaDropdown(o,n),o.remove())):o&&o.length>0&&(n=$("<touch-ui-dropdown></touch-ui-dropdown>"),t.createTouchMenuItemsFromMegaDropdown(o,n),o.replaceWith(n))})},replaceWithMenuItemTags:function(e){for(var t=[],i=0;i<e.length;i++){var n=$(e[i]),o=n.find("ui-dropdown"),r=n.find("ui-mega-dropdown");if(o[0]||r[0]){var a=n.html(),s=$("<menu-item-dropdown>"+a+"</menu-item-dropdown>");t.push(s[0])}else t.push(n[0])}return t},iconifyTouchMenuItems:function(e){var t=this.iconAttribute();$.each(e,function(e,i){var n=$(i),o=n.attr(t);if(void 0!==o){var r=$('<span class="touch '+o+'"></span>');n.prepend(r)}})},createTouchMenuItemsFromMegaDropdown:function(e,t){var i=e.find("a").not('[touch-menu-item="false"]');$.each(i,function(e,i){var n=$("<menu-item></menu-item>");n.append(i),t.append(n)})}},_unbindSearch:function(e){e.off("focus"),e.off("blur")},_onDestroy:function(){this._unbindSearch()}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.transition=t(),e.returnExports=e.elliptical.extensions.transition)}(this,function(){return{_transition:function(e,t,i){return $.transition=$.transition||$.transit,e instanceof jQuery||(e=$(e)),t=t||{},t==={}&&(t.duration=300,t.preset="fadeIn"),"none"===t.preset?void e.hide():void e.transition(t,function(){i&&i.call(e[0])})}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.transform=t(),e.returnExports=e.elliptical.extensions.transform)}(this,function(){var e=$.transforms,t="ui-hardware-accelerated",i="ui-overflow-container",n="ui-fixed-toggle-container",o="ui-drawer-box-shadow";return{_setHardwareAcceleration:function(i){this._data.set("toggleAcceleration",e.setHardwareAcceleration(i,t))},_resetHardwareAcceleration:function(i){e.resetHardwareAcceleration(i,this._data.get("toggleAcceleration"),t)},_setContainerOverflow:function(t){this._data.set("toggleOverflow",e.setContainerOverflow(t,i))},_resetContainerOverflow:function(t){e.resetContainerOverflow(t,i)},_resetContainer:function(t){e.resetContainer(t,o,n)},_resetTransition:function(t){e.resetTransition(t)},_resetTransform:function(t){e.resetTransform(t)},_transform:function(t,i){e.transform(t,i)},_3dTransition:function(t,i,n){e.transition3d(t,i,n)}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("dustjs")):"function"==typeof define&&define.amd?define(["elliptical-utils","dustjs"],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.template=t(e.elliptical.utils,e.dust),e.returnExports=e.elliptical.extensions.template)}(this,function(e,t){var i=e.random;return{__precompile:function(e,i){e=e.replace(/&quot;/g,'"');var n=t.compile(e,i);t.loadSource(n)},_precompileTemplate:function(e,t){var i=e.innerHTML;this.__precompile(i,t)},_verifyTemplateExists:function(e){void 0===t.cache[e]&&console.log("warning: template "+e+" does not exist")},_templateExists:function(e){return void 0!==t.cache[e]},_render:function(e,i,n,o){this._verifyTemplateExists(i),t.render(i,n,function(t,i){(i||""===i)&&(e.innerHTML=i),o&&o(t,i)})},_renderTemplate:function(e,i,n){this._verifyTemplateExists(e),t.render(e,i,n)},_renderTemplateString:function(e,t,n){var o="template-"+i.str(6);this.__precompile(e,o),this._renderTemplate(o,t,n)}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.event=t(),e.returnExports=e.elliptical.extensions.event)}(this,function(){return{_onEventTrigger:function(e,t){this._triggerEvent(e,t)},_triggerEvent:function(e,t){var i=$.Event(e);this._trigger(e,i,t)},_trigger:function(e,t,i){this.options?this._jqTrigger(e,t,i):this.__triggerEvent(e,i)},__triggerEvent:function(e,t){var i=this._utils.string.tagNameToNamespace(tagName);e=i+"."+e,this.element.trigger(e,t)},_jqTrigger:function(e,t,i){try{var n,o,r=this.options[e];i=i||{};var a=this.widgetEventPrefix,s=this.bindings[0].tagName.toLowerCase(),l=s.split("-"),d=l.length,u=this._utils.string.tagNameToNamespace(s),c=a.toArrayFromCamelCase(),h=this._utils.array.toNamespaceFromArray(c);if(a=h===u?h:d>1?u+"."+a:this.namespace+"."+a,t=$.Event(t),t.type=(e===a?e:a+"."+e).toLowerCase(),t.target=this.element[0],o=t.originalEvent)for(n in o)n in t||(t[n]=o[n]);return this.element.trigger(t,i),!($.isFunction(r)&&r.apply(this.element[0],[t].concat(i))===!1||t.isDefaultPrevented())}catch(p){}}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],t):(e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.options=t(e.elliptical.utils),e.returnExports=e.elliptical.extensions.options)}(this,function(e){return{_setOptionsFromAttribute:function(){var e=this.options?this.options.opts:this.opts;void 0!==e&&(e=JSON.parse(e),this.options?this.options.opts=e:this.opts=e)}}}),function(e,t){if("undefined"!=typeof module&&module.exports)module.exports=t(require("elliptical-utils"),require("jquery-extensions"),require("./prototype.device"),require("./prototype.template"),require("./prototype.transition"),require("./prototype.transform"),require("./prototype.utils"),require("./prototype.event"),require("./prototype.options"));else if("function"==typeof define&&define.amd)define(["elliptical-utils","jquery-extensions","./prototype.device","./prototype.template","./prototype.transition","./prototype.transform","./prototype.utils","./prototype.event","./prototype.options"],t);else{var i=e.elliptical.extensions;e.elliptical.extensions.base=t(e.elliptical.utils,e,i.device,i.template,i.transition,i.transform,i.utils,i.event,i.options),e.returnExports=e.elliptical.extensions.base}}(this,function(e,t,i,n,o,r,a,s,l){var d={};return Object.assign(d,a,i,n,o,r,s,l),d});