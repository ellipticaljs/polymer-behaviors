!function(e,r){"function"==typeof define&&define.amd&&define.amd.dust===!0?define(["dust.core"],r):"object"==typeof exports?module.exports=r(require("dustjs-linkedin")):r(e.dust)}(this,function(e){function r(r,t,n){n=n||"INFO",r=r?"{@"+r+"}: ":"",e.log(r+t,n)}function t(e){p[e]||(r(e,"Deprecation warning: "+e+" is deprecated and will be removed in a future version of dustjs-helpers","WARN"),r(null,"For help and a deprecation timeline, see https://github.com/linkedin/dustjs-helpers/wiki/Deprecated-Features#"+e.replace(/\W+/g,""),"WARN"),p[e]=!0)}function n(e){return e.stack.tail&&e.stack.tail.head&&"undefined"!=typeof e.stack.tail.head.__select__}function s(e){return n(e)&&e.get("__select__")}function a(e,r){var t,n=e.stack.head,s=e.rebase();e.stack&&e.stack.tail&&(s.stack=e.stack.tail);var a={isPending:!1,isResolved:!1,isDeferredComplete:!1,deferreds:[]};for(t in r)a[t]=r[t];return s.push({__select__:a}).push(n,e.stack.index,e.stack.of)}function i(e){var r,t;if(e.isDeferredPending=!0,e.deferreds.length)for(e.isDeferredComplete=!0,r=0,t=e.deferreds.length;t>r;r++)e.deferreds[r]();e.isDeferredPending=!1}function o(e,r){return"function"==typeof r?r.toString().replace(/(^\s+|\s+$)/gm,"").replace(/\n/gm,"").replace(/,\s*/gm,", ").replace(/\)\{/gm,") {"):r}function l(e,r){return function(t,n,s,a){return u(t,n,s,a,e,r)}}function u(e,t,n,a,i,o){var l,u,p,d,f=n.block,h=n["else"],v=s(t)||{};if(v.isResolved&&!v.isDeferredPending)return e;if(a.hasOwnProperty("key"))u=a.key;else{if(!v.hasOwnProperty("key"))return r(i,"No key specified","WARN"),e;u=v.key}return d=a.type||v.type,u=c(t.resolve(u),d),p=c(t.resolve(a.value),d),o(u,p)?(v.isPending||(l=!0,v.isPending=!0),f&&(e=e.render(f,t)),l&&(v.isResolved=!0)):h&&(e=e.render(h,t)),e}function c(e,r){switch(r&&(r=r.toLowerCase()),r){case"number":return+e;case"string":return String(e);case"boolean":return e="false"===e?!1:e,Boolean(e);case"date":return new Date(e)}return e}var p={},d={tap:function(e,r,n){return t("tap"),n.resolve(e)},sep:function(e,r,t){var n=t.block;return r.stack.index===r.stack.of-1?e:n?n(e,r):e},first:function(e,r,t){return 0===r.stack.index?t.block(e,r):e},last:function(e,r,t){return r.stack.index===r.stack.of-1?t.block(e,r):e},contextDump:function(e,t,n,s){var a,i,l=t.resolve(s.to),u=t.resolve(s.key);switch(u){case"full":a=t.stack;break;default:a=t.stack.head}switch(i=JSON.stringify(a,o,2),l){case"console":r("contextDump",i);break;default:i=i.replace(/</g,"\\u003c"),e=e.write(i)}return e},math:function(e,t,n,o){var l,u=o.key,c=o.method,p=o.operand,d=o.round;if(!o.hasOwnProperty("key")||!o.method)return r("math","`key` or `method` was not provided","ERROR"),e;switch(u=parseFloat(t.resolve(u)),p=parseFloat(t.resolve(p)),c){case"mod":0===p&&r("math","Division by 0","ERROR"),l=u%p;break;case"add":l=u+p;break;case"subtract":l=u-p;break;case"multiply":l=u*p;break;case"divide":0===p&&r("math","Division by 0","ERROR"),l=u/p;break;case"ceil":case"floor":case"round":case"abs":l=Math[c](u);break;case"toint":l=parseInt(u,10);break;default:r("math","Method `"+c+"` is not supported","ERROR")}return"undefined"!=typeof l&&(d&&(l=Math.round(l)),n&&n.block?(t=a(t,{key:l}),e=e.render(n.block,t),i(s(t))):e=e.write(l)),e},select:function(e,t,n,o){var l=n.block,u={};return o.hasOwnProperty("key")&&(u.key=t.resolve(o.key)),o.hasOwnProperty("type")&&(u.type=o.type),l?(t=a(t,u),e=e.render(l,t),i(s(t))):r("select","Missing body block","WARN"),e},eq:l("eq",function(e,r){return e===r}),ne:l("ne",function(e,r){return e!==r}),lt:l("lt",function(e,r){return r>e}),lte:l("lte",function(e,r){return r>=e}),gt:l("gt",function(e,r){return e>r}),gte:l("gte",function(e,r){return e>=r}),any:function(e,t,n,a){var i=s(t);return i?i.isDeferredComplete?r("any","Must not be nested inside {@any} or {@none} block","ERROR"):e=e.map(function(e){i.deferreds.push(function(){i.isResolved&&(e=e.render(n.block,t)),e.end()})}):r("any","Must be used inside a {@select} block","ERROR"),e},none:function(e,t,n,a){var i=s(t);return i?i.isDeferredComplete?r("none","Must not be nested inside {@any} or {@none} block","ERROR"):e=e.map(function(e){i.deferreds.push(function(){i.isResolved||(e=e.render(n.block,t)),e.end()})}):r("none","Must be used inside a {@select} block","ERROR"),e},size:function(r,t,n,s){var a,i,o=s.key;if(o=t.resolve(s.key),o&&o!==!0)if(e.isArray(o))a=o.length;else if(!isNaN(parseFloat(o))&&isFinite(o))a=o;else if("object"==typeof o){a=0;for(i in o)o.hasOwnProperty(i)&&a++}else a=(o+"").length;else a=0;return r.write(a)}};for(var f in d)e.helpers[f]=d[f];return e}),function(e,r){"undefined"!=typeof module&&module.exports?module.exports=r(require("dustjs"),require("dustjs-helpers"),require("elliptical-utils")):"function"==typeof define&&define.amd?define(["dustjs","dustjs-helpers","elliptical-utils"],r):e.returnExports=r(e.dust,e.dust.helpers,e.elliptical.utils)}(this,function(e,r,t){var n=t.string,s=t.random;return e.helpers.formatCurrency=function(r,n,s,a){var i,o=e.helpers.tap(a.value,r,n);try{t.isNumeric(o)?(o=parseFloat(o),i=o.toFixed(2)):i=""}catch(l){i=""}return r.write(i)},e.helpers.extFormatCurrency=function(r,n,s,a){var i,o=e.helpers.tap(a.value,r,n);try{t.isNumeric(o)?(o=parseFloat(o),i=o.toFixed(2),i="$"+i.toString()):i=""}catch(l){i=""}return r.write(i)},e.helpers.placeholder=function(r,t,n,s){var a=e.helpers.tap(s.value,r,t),i=e.helpers.tap(s.defaultValue,r,t);return a?r.write(a):r.write(i)},e.helpers.phraseCase=function(r,t,s,a){var i=e.helpers.tap(a.value,r,t);return i=n.camelCaseToSpace(i),r.write(i)},e.helpers.checked=function(r,t,n,s){var a=e.helpers.tap(s.value,r,t),i="";return a&&(i="checked"),r.write(i)},e.helpers.radio=function(r,t,n,s){var a=e.helpers.tap(s.value,r,t),i=e.helpers.tap(s.key,r,t),o="";try{a&&a.toLowerCase()===i.toLowerCase()&&(o="checked")}catch(l){}return r.write(o)},e.helpers.selected=function(r,t,n,s){var a=e.helpers.tap(s.value,r,t),i=e.helpers.tap(s.key,r,t),o="";try{a&&a.toLowerCase()===i.toLowerCase()&&(o="selected")}catch(l){}return r.write(o)},e.helpers.truthy=function(r,t,n,s){var a=e.helpers.tap(s.value,r,t),i=e.helpers.tap(s["true"],r,t),o=e.helpers.tap(s["false"],r,t),l=a?i:o;return r.write(l)},e.helpers.hide=function(r,t,n,s){var a=e.helpers.tap(s.value,r,t),i="";return a&&(i="hide"),r.write(i)},e.helpers.disable=function(r,t,n,s){var a=e.helpers.tap(s.value,r,t),i="";return a&&(i="disabled"),r.write(i)},e.helpers.readonly=function(r,t,n,s){var a=e.helpers.tap(s.value,r,t),i="";return a&&(i="readonly"),r.write(i)},e.helpers.position=function(e,r,t){var n=r.stack.index+1;return e.write(n)},e.helpers.index=function(e,r,t){var n=r.stack.index;return e.write(n)},e.helpers.urlEncode=function(r,t,n,s){var a=e.helpers.tap(s.value,r,t);return a=a?encodeURIComponent(a):"",r.write(a)},e.helpers.toggle=function(r,t,n,s){var a=e.helpers.tap(s.value,r,t),i=e.helpers.tap(s.on,r,t),o=e.helpers.tap(s.onCss,r,t),l=e.helpers.tap(s.offCss,r,t);return css=a===i?o:l,r.write(css)},e.helpers.compare=function(r,t,n,s){var a="",i=e.helpers.tap(s.value,r,t),o=e.helpers.tap(s.test,r,t),l=e.helpers.tap(s.echo,r,t);return i===o&&(a=l),r.write(a)},e.helpers.pluralize=function(r,t,n,s){var a=e.helpers.tap(s.count,r,t),i=e.helpers.tap(s.singular,r,t),o=e.helpers.tap(s.plural,r,t),l=1===a?i:o;return r.write(l)},e.helpers.id=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t);return void 0===i&&(i=s.id()),r.write(i)},e.helpers.guid=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t);return(void 0===i||""===i)&&(i=s.guid()),r.write(i)},e.helpers.inline={},e.helpers.inline.formatCurrency=function(e){e=parseFloat(e);var r;try{r=t.isNumeric(e)?e.toFixed(2):""}catch(n){r=""}return r},e.helpers.inline.extFormatCurrency=function(e){e=parseFloat(e);var r;return t.isNumeric(e)?(r=e.toFixed(2),r="$"+r.toString()):r="",r},e});